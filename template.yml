AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: Python file including external library
Resources:

  SudoCoinsSurveyEndFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: survey.survey_end.lambda_handler
      Runtime: python3.8
      FunctionName: SudoCoinsSurveyEnd
      CodeUri: ./src
      MemorySize: 512
      Policies:
        - AmazonSQSFullAccess
        - AmazonDynamoDBFullAccess
        - AmazonSNSFullAccess

  SudoCoinsTakeSurveyFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: survey.take_survey.lambda_handler
      Runtime: python3.8
      FunctionName: SudoCoinsTakeSurvey
      CodeUri: ./src
      Policies:
        - AmazonSQSFullAccess
        - AmazonDynamoDBFullAccess
        - AmazonSNSFullAccess

  SudoCoinsEndTransactionFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: survey.end_transaction.lambda_handler
      Runtime: python3.8
      FunctionName: SudoCoinsEndTransaction
      CodeUri: ./src
      Policies:
        - AmazonSQSFullAccess
        - AmazonDynamoDBFullAccess
        - AmazonSNSFullAccess
      MemorySize: 512
      Events:
        SQSEvent:
          Type: SQS
          Properties:
            Queue: arn:aws:sqs:us-west-2:977566059069:EndTransaction.fifo
            BatchSize: 10
            Enabled: true

  CashOutFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: cash_out.lambda_handler
      Runtime: python3.8
      FunctionName: SudoCoinsCashOut
      CodeUri: ./src

  UpdateProfileFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: update_profile.lambda_handler
      Runtime: python3.8
      FunctionName: UpdateProfile
      CodeUri: ./src

  SetCurrencyFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: setCurrency.lambda_handler
      Runtime: python3.8
      FunctionName: setCurrency
      CodeUri: ./src

  contactFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: contact.lambda_handler
      Runtime: python3.8
      FunctionName: contact
      CodeUri: ./src

  exchangeRatesFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: getRates.lambda_handler
      Runtime: python3.8
      FunctionName: getRates
      CodeUri: ./src/ecommerce

  dynataRedirectFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: survey.dynata_redirect.lambda_handler
      Runtime: python3.8
      FunctionName: dynataRedirect
      CodeUri: ./src
      Policies:
        - AmazonSQSFullAccess
        - AmazonDynamoDBFullAccess
        - AmazonSNSFullAccess

  dynataCallbackFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: survey.dynata_callback.lambda_handler
      Runtime: python3.8
      FunctionName: dynataCallback
      CodeUri: ./src
      Policies:
        - AmazonSQSFullAccess
        - AmazonDynamoDBFullAccess
        - AmazonSNSFullAccess

  setConsentFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: setConsent.lambda_handler
      Runtime: python3.8
      FunctionName: setConsent
      CodeUri: ./src

  getProfileFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: getProfile.lambda_handler
      Runtime: python3.8
      FunctionName: getProfile
      Description: Gets all data for displaying the profil page
      MemorySize: 512
      CodeUri: ./src

  moreHistoryFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: moreHistory.lambda_handler
      Runtime: python3.8
      FunctionName: moreHistory
      CodeUri: ./src

  checkoutFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: checkout.lambda_handler
      Runtime: python3.8
      FunctionName: checkout
      CodeUri: ./src/ecommerce

  getGiftCardFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: getGiftCard.lambda_handler
      Runtime: python3.8
      FunctionName: getGiftCard
      CodeUri: ./src/ecommerce

  coinbaseCallback:
    Type: AWS::Serverless::Function
    Properties:
      Handler: coinbaseCallback.lambda_handler
      Runtime: python3.8
      FunctionName: coinbaseCallback
      CodeUri: ./src

  lucidRedirectFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: survey.lucid_redirect.lambda_handler
      Runtime: python3.8
      FunctionName: lucidRedirect
      CodeUri: ./src
      Policies:
        - AmazonSQSFullAccess
        - AmazonDynamoDBFullAccess
        - AmazonSNSFullAccess

  nextStepFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: nextStep.lambda_handler
      Runtime: python3.8
      FunctionName: nextStep
      CodeUri: ./src

  autoVerify:
    Type: AWS::Serverless::Function
    Properties:
      Handler: auto_verify.lambda_handler
      Runtime: python3.8
      FunctionName: autoVerify
      CodeUri: ./src

  artCounter:
    Type: AWS::Serverless::Function
    Properties:
      Handler: artRedirect.lambda_handler
      Runtime: python3.8
      FunctionName: artCounter
      CodeUri: ./src/art

  addArt:
    Type: AWS::Serverless::Function
    Properties:
      Handler: addArt.lambda_handler
      Runtime: python3.8
      FunctionName: addArt
      CodeUri: ./src/art

  artPrompt:
    Type: AWS::Serverless::Function
    Properties:
      Handler: artPrompt.lambda_handler
      Runtime: python3.8
      FunctionName: artPrompt
      CodeUri: ./src/art

  setTrending:
    Type: AWS::Serverless::Function
    Properties:
      Handler: set_trending.lambda_handler
      Runtime: python3.8
      FunctionName: setTrending
      CodeUri: ./src/art

  getRecent:
    Type: AWS::Serverless::Function
    Properties:
      Handler: getRecent.lambda_handler
      Runtime: python3.8
      FunctionName: getRecent
      CodeUri: ./src/art

  myGallery:
    Type: AWS::Serverless::Function
    Properties:
      Handler: myGallery.lambda_handler
      Runtime: python3.8
      FunctionName: myGallery
      CodeUri: ./src/art

  getArts:
    Type: AWS::Serverless::Function
    Properties:
      Handler: get_arts.lambda_handler
      Runtime: python3.8
      FunctionName: getArts
      CodeUri: ./src/art

  getTrending:
    Type: AWS::Serverless::Function
    Properties:
      Handler: get_trending.lambda_handler
      Runtime: python3.8
      FunctionName: getTrending
      CodeUri: ./src/art

  registerClick:
    Type: AWS::Serverless::Function
    Properties:
      Handler: register_click.lambda_handler
      Runtime: python3.8
      FunctionName: registerClick
      CodeUri: ./src/art

  shareArt:
    Type: AWS::Serverless::Function
    Properties:
      Handler: shareArt.lambda_handler
      Runtime: python3.8
      FunctionName: shareArt
      CodeUri: ./src/art

  gdprCallback:
    Type: AWS::Serverless::Function
    Properties:
      Handler: gdprCallback.lambda_handler
      Runtime: python3.8
      FunctionName: gdprCallback
      CodeUri: ./src

  addView:
    Type: AWS::Serverless::Function
    Properties:
      Handler: add_view.lambda_handler
      Runtime: python3.8
      FunctionName: addView
      CodeUri: ./src/art




